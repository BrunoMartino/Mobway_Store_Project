(()=>{"use strict";class e{constructor(e,t){this.links=document.querySelectorAll(e),this.submenu=document.querySelectorAll(t),this.activeSubMenu=this.activeSubMenu.bind(this)}hasSubMenu(e){const t=Array.from(e.children),i=Array.from(this.submenu);return t.some((e=>i.includes(e)))}activeSubMenu(e){const t=e.currentTarget,i=t.querySelector(".sub-menu");i&&(this.submenu.forEach((e=>{e.classList.remove("active")})),i.classList.add("active"),setTimeout((()=>{t.removeEventListener("click",this.removePreventedEvent),console.log("removeu trava")}),600))}removePreventedEvent(e){e.preventDefault()}subMenuEvents(){this.links.forEach((e=>{this.hasSubMenu(e)&&(e.addEventListener("click",this.activeSubMenu),e.addEventListener("click",this.removePreventedEvent))}))}init(){this.subMenuEvents()}}class t{constructor(e,t){this.slide=document.querySelector(e),this.wrapper=document.querySelector(t),this.dist={finalPosition:0,startX:0,movement:0},this.activeClass="ativo",this.changeEvent=new Event("changeEvent"),this.mousedown,this.mouseup}transitionSlide(e){this.slide.style.transition=e?"transform .4s":""}moveSlide(e){this.dist.movePosition=e,this.slide.style.transform=`translate3d(${e}px, 0, 0)`}updatePosition(e){return this.dist.movement=1.6*(this.dist.startX-e),this.dist.finalPosition-this.dist.movement}removeAnchorClick(){const e=event.target.closest("a");function t(e){e.preventDefault()}e&&(e.addEventListener("click",t),setTimeout((()=>{e.removeEventListener("click",t)}),180))}onStart(e){let t;"mousedown"===e.type?(e.preventDefault(),this.dist.startX=e.clientX,t="mousemove",this.mousedown=e.timeStamp):(this.dist.startX=e.changedTouches[0].clientX,t="touchmove"),this.wrapper.addEventListener(t,this.onMove),this.transitionSlide(!1)}onMove(e){const t="mousemove"===e.type?e.clientX:e.changedTouches[0].clientX,i=this.updatePosition(t);this.moveSlide(i)}onEnd(e){const t="mouseup"===e.type?"mousemove":"touchmove";"mouseup"===e.type&&(this.mouseup=e.timeStamp),this.mouseup-this.mousedown>150&&this.removeAnchorClick(),this.wrapper.removeEventListener(t,this.onMove),this.dist.finalPosition=this.dist.movePosition,this.transitionSlide(!0),this.changeSlideOnEnd()}addSlideEvents(){this.wrapper.addEventListener("mousedown",this.onStart),this.wrapper.addEventListener("touchstart",this.onStart),this.wrapper.addEventListener("mouseup",this.onEnd),this.wrapper.addEventListener("touchend",this.onEnd)}activePrevSlide(){if(void 0!==this.index.prev)this.changeSlide(this.index.prev);else{const e=this.slideArray.length-1;this.changeSlide(e)}}activeNextSlide(){void 0!==this.index.next?this.changeSlide(this.index.next):this.changeSlide(0)}changeSlideOnEnd(){if(this.dist.movement>120&&void 0!==this.index.next)return this.activeNextSlide();if(this.dist.movement>120&&void 0===this.index.next)return this.changeSlide(0);if(this.dist.movement<-120&&void 0!==this.index.prev)return this.activePrevSlide();if(this.dist.movement<-120&&void 0===this.index.prev){const e=this.slideArray.length-1;this.changeSlide(e)}else this.changeSlide(this.index.active)}carouselSlide(){setInterval((()=>{this.activeNextSlide()}),8e3)}slidesConfig(){this.slideArray=[...this.slide.children].map((e=>({position:this.slidePosition(e),element:e})))}slideIndexNav(e){const t=this.slideArray.length-1;this.index={prev:e?e-1:void 0,active:e,next:e===t?void 0:e+1}}slidePosition(e){const t=(this.wrapper.offsetWidth-e.offsetWidth)/2;return-(e.offsetLeft-t)}changeSlide(e){const t=this.slideArray[e];this.moveSlide(t.position),this.slideIndexNav(e),this.dist.finalPosition=t.position,this.changeActiveClass(),this.wrapper.dispatchEvent(this.changeEvent)}changeActiveClass(){this.slideArray.forEach((e=>{e.element.classList.remove(this.activeClass)})),this.slideArray[this.index.active].element.classList.add(this.activeClass)}addResizeEvent(e){let t=this.slideArray[e].clientWidth;window.addEventListener("resize",(()=>{this.slide.style.transform=`translateX(${1*-t}px)`}))}bindEvents(){this.onStart=this.onStart.bind(this),this.onMove=this.onMove.bind(this),this.onEnd=this.onEnd.bind(this),this.activePrevSlide=this.activePrevSlide.bind(this),this.activeNextSlide=this.activeNextSlide.bind(this)}init(){return this.bindEvents(),this.transitionSlide(!0),this.addSlideEvents(),this.slidesConfig(),this.changeSlide(0),this.addResizeEvent(0),this.carouselSlide(),this}}class i extends t{constructor(e,t){super(e,t),this.bindControlEvents()}addArrow(e,t){this.prevElement=document.querySelector(e),this.nextElement=document.querySelector(t),e&&t&&this.addArrowEvent()}addArrowEvent(){this.prevElement.addEventListener("click",this.activePrevSlide),this.nextElement.addEventListener("click",this.activeNextSlide)}createControl(){const e=document.createElement("ul");return e.dataset.control="page-slide",this.slideArray.forEach(((t,i)=>{e.innerHTML+=`<li><a href="#slide${i+1}">${i+1}</a></li>`})),this.wrapper.appendChild(e),e}eventControl(e,t){e.addEventListener("click",(e=>{e.preventDefault(),this.changeSlide(t)})),this.wrapper.addEventListener("changeEvent",this.activeControlItem)}addControl(e){this.control=document.querySelector(e)||this.createControl(),this.controlArray=[...this.control.children],this.activeControlItem(),this.controlArray.forEach(this.eventControl)}activeControlItem(){this.controlArray.forEach((e=>e.classList.remove(this.activeClass))),this.controlArray[this.index.active].classList.add(this.activeClass)}bindControlEvents(){this.eventControl=this.eventControl.bind(this),this.activeControlItem=this.activeControlItem.bind(this)}}const s=document.querySelector(".header__cat-btn");if(console.log(s),s.addEventListener("click",(e=>{e.preventDefault()})),new class{constructor(t,i,s,n,o){this.menuButton=document.querySelector(t),this.menuList=document.querySelectorAll(i),this.parentCat=document.querySelectorAll(s),this.submenu=document.querySelectorAll(n),this.html=document.querySelector("html"),this.isOpen=!1,this.dropdownMenu=new e(s,n),this.events=void 0===o?["touchstart","click"]:o,this.openMenu=this.openMenu.bind(this),this.linkPreventRemove=this.linkPreventRemove.bind(this)}linkPreventRemove(e){e.preventDefault()}openMenu(e){"touchstart"===e.type&&e.preventDefault(),this.isOpen?(this.menuList.forEach((e=>{e.classList.remove("active")})),this.menuButton.classList.remove("active"),this.isOpen=!1):(this.menuList.forEach((e=>{e.classList.add("active")})),this.menuButton.classList.add("active"),function(e,t,i){const s=document.querySelector("html");function n(o){!e.some((e=>e.contains(o.target)))&&(i(),t.forEach((e=>{s.removeEventListener(e,n)})))}t.forEach((e=>{setTimeout((()=>{s.addEventListener(e,n)}),0)}))}(Array.from(this.menuList),this.events,(()=>{this.menuList.forEach((e=>{e.classList.remove("active")})),this.menuButton.classList.remove("active"),this.isOpen=!1})),this.isOpen=!0,this.isOpen&&this.dropdownMenu.init())}addMenuMobileEvents(){this.events.forEach((e=>{this.menuButton.addEventListener(e,this.openMenu)}))}init(){return this.menuButton&&this.menuList&&this.addMenuMobileEvents(),this}}(".header__cat-btn",'[data-menu="list"]',"#menu-all-category > .menu-item",".sub-menu").init(),document.querySelector('[data-home="slide"]')){const e=new i(".slide",".slide-wrapper");e.init(),e.addControl()}})();