(()=>{"use strict";class e{constructor(e,t){this.links=document.querySelectorAll(e),this.submenu=document.querySelectorAll(t),this.activeSubMenu=this.activeSubMenu.bind(this)}hasSubMenu(e){const t=Array.from(e.children),i=Array.from(this.submenu);return t.some((e=>i.includes(e)))}activeSubMenu(e){const t=e.currentTarget,i=t.querySelector(".sub-menu");i&&(this.submenu.forEach((e=>{e.classList.remove("active")})),i.classList.add("active"),setTimeout((()=>{t.removeEventListener("click",this.removePreventedEvent),console.log("removeu trava")}),600))}removePreventedEvent(e){e.preventDefault()}subMenuEvents(){this.links.forEach((e=>{this.hasSubMenu(e)&&(e.addEventListener("click",this.activeSubMenu),e.addEventListener("click",this.removePreventedEvent))}))}init(){this.subMenuEvents()}}class t{constructor(t,i,s,n,r){this.menuButton=document.querySelector(t),this.menuList=document.querySelectorAll(i),this.parentCat=document.querySelectorAll(s),this.submenu=document.querySelectorAll(n),this.html=document.querySelector("html"),this.isOpen=!1,this.dropdownMenu=new e(s,n),this.events=void 0===r?["touchstart","click"]:r,this.openMenu=this.openMenu.bind(this),this.linkPreventRemove=this.linkPreventRemove.bind(this)}linkPreventRemove(e){e.preventDefault()}openMenu(e){"touchstart"===e.type&&e.preventDefault(),this.isOpen?(this.menuList.forEach((e=>{e.classList.remove("active")})),this.menuButton.classList.remove("active"),this.isOpen=!1):(this.menuList.forEach((e=>{e.classList.add("active")})),this.menuButton.classList.add("active"),function(e,t,i){const s=document.querySelector("html");function n(r){!e.some((e=>e.contains(r.target)))&&(i(),t.forEach((e=>{s.removeEventListener(e,n)})))}t.forEach((e=>{setTimeout((()=>{s.addEventListener(e,n)}),0)}))}(Array.from(this.menuList),this.events,(()=>{this.menuList.forEach((e=>{e.classList.remove("active")})),this.menuButton.classList.remove("active"),this.isOpen=!1})),this.isOpen=!0,this.isOpen&&this.dropdownMenu.init())}addMenuMobileEvents(){this.events.forEach((e=>{this.menuButton.addEventListener(e,this.openMenu)}))}init(){return this.menuButton&&this.menuList&&this.addMenuMobileEvents(),this}}class i{constructor(e,t){this.slide=document.querySelector(e),this.wrapper=document.querySelector(t),this.dist={finalPosition:0,startX:0,movement:0},this.activeClass="ativo",this.changeEvent=new Event("changeEvent"),this.mousedown,this.mouseup}transitionSlide(e){this.slide.style.transition=e?"transform .4s":""}moveSlide(e){this.dist.movePosition=e,this.slide.style.transform=`translate3d(${e}px, 0, 0)`}updatePosition(e){return this.dist.movement=1.6*(this.dist.startX-e),this.dist.finalPosition-this.dist.movement}removeAnchorClick(){const e=event.target.closest("a");function t(e){e.preventDefault()}e&&(e.addEventListener("click",t),setTimeout((()=>{e.removeEventListener("click",t)}),180))}onStart(e){let t;"mousedown"===e.type?(e.preventDefault(),this.dist.startX=e.clientX,t="mousemove",this.mousedown=e.timeStamp):(this.dist.startX=e.changedTouches[0].clientX,t="touchmove"),this.wrapper.addEventListener(t,this.onMove),this.transitionSlide(!1)}onMove(e){const t="mousemove"===e.type?e.clientX:e.changedTouches[0].clientX,i=this.updatePosition(t);this.moveSlide(i)}onEnd(e){const t="mouseup"===e.type?"mousemove":"touchmove";"mouseup"===e.type&&(this.mouseup=e.timeStamp),this.mouseup-this.mousedown>150&&this.removeAnchorClick(),this.wrapper.removeEventListener(t,this.onMove),this.dist.finalPosition=this.dist.movePosition,this.transitionSlide(!0),this.changeSlideOnEnd()}addSlideEvents(){this.wrapper.addEventListener("mousedown",this.onStart),this.wrapper.addEventListener("touchstart",this.onStart),this.wrapper.addEventListener("mouseup",this.onEnd),this.wrapper.addEventListener("touchend",this.onEnd)}activePrevSlide(){if(void 0!==this.index.prev)this.changeSlide(this.index.prev);else{const e=this.slideArray.length-1;this.changeSlide(e)}}activeNextSlide(){void 0!==this.index.next?this.changeSlide(this.index.next):this.changeSlide(0)}changeSlideOnEnd(){if(this.dist.movement>120&&void 0!==this.index.next)return this.activeNextSlide();if(this.dist.movement>120&&void 0===this.index.next)return this.changeSlide(0);if(this.dist.movement<-120&&void 0!==this.index.prev)return this.activePrevSlide();if(this.dist.movement<-120&&void 0===this.index.prev){const e=this.slideArray.length-1;this.changeSlide(e)}else this.changeSlide(this.index.active)}carouselSlide(){setInterval((()=>{this.activeNextSlide()}),8e3)}slidesConfig(){this.slideArray=[...this.slide.children].map((e=>({position:this.slidePosition(e),element:e})))}slideIndexNav(e){const t=this.slideArray.length-1;this.index={prev:e?e-1:void 0,active:e,next:e===t?void 0:e+1}}slidePosition(e){const t=(this.wrapper.offsetWidth-e.offsetWidth)/2;return-(e.offsetLeft-t)}changeSlide(e){const t=this.slideArray[e];this.moveSlide(t.position),this.slideIndexNav(e),this.dist.finalPosition=t.position,this.changeActiveClass(),this.wrapper.dispatchEvent(this.changeEvent)}changeActiveClass(){this.slideArray.forEach((e=>{e.element.classList.remove(this.activeClass)})),this.slideArray[this.index.active].element.classList.add(this.activeClass)}addResizeEvent(e){let t=this.slideArray[e].clientWidth;window.addEventListener("resize",(()=>{this.slide.style.transform=`translateX(${1*-t}px)`}))}bindEvents(){this.onStart=this.onStart.bind(this),this.onMove=this.onMove.bind(this),this.onEnd=this.onEnd.bind(this),this.activePrevSlide=this.activePrevSlide.bind(this),this.activeNextSlide=this.activeNextSlide.bind(this)}init(){return this.bindEvents(),this.transitionSlide(!0),this.addSlideEvents(),this.slidesConfig(),this.changeSlide(0),this.addResizeEvent(0),this.carouselSlide(),this}}class s extends i{constructor(e,t){super(e,t),this.bindControlEvents()}addArrow(e,t){this.prevElement=document.querySelector(e),this.nextElement=document.querySelector(t),e&&t&&this.addArrowEvent()}addArrowEvent(){this.prevElement.addEventListener("click",this.activePrevSlide),this.nextElement.addEventListener("click",this.activeNextSlide)}createControl(){const e=document.createElement("ul");return e.dataset.control="page-slide",this.slideArray.forEach(((t,i)=>{e.innerHTML+=`<li><a href="#slide${i+1}">${i+1}</a></li>`})),this.wrapper.appendChild(e),e}eventControl(e,t){e.addEventListener("click",(e=>{e.preventDefault(),this.changeSlide(t)})),this.wrapper.addEventListener("changeEvent",this.activeControlItem)}addControl(e){this.control=document.querySelector(e)||this.createControl(),this.controlArray=[...this.control.children],this.activeControlItem(),this.controlArray.forEach(this.eventControl)}activeControlItem(){this.controlArray.forEach((e=>e.classList.remove(this.activeClass))),this.controlArray[this.index.active].classList.add(this.activeClass)}bindControlEvents(){this.eventControl=this.eventControl.bind(this),this.activeControlItem=this.activeControlItem.bind(this)}}class n{constructor(e){this.product=document.querySelectorAll(e),this.productArray=[...this.product],this.now=new Date}createTimer(){this.productArray.forEach(((e,t)=>{const i=document.createElement("div");i.classList.add("item-timer"),e.appendChild(i),this.setTimer(i,t)}))}setTimer(e,t){let i,s=this.getTimerData();i=s&&s[t]?s[t].remainTime:1*t*3600+1500+20;let n=setInterval((()=>{let s=Math.floor(i/3600),r=Math.floor(i%3600/60),a=i%60;s=s.toString().padStart(2,"0"),r=r.toString().padStart(2,"0"),a=a.toString().padStart(2,"0"),e.innerHTML=`<p>${s}:${r}:${a}</p>`,i<=0?(e.innerHTML="<p>Acabou</p>",clearInterval(n),e.parentNode.classList.add("disabled"),this.updateTimerData(t,0)):this.updateTimerData(t,i),i--}),1e3)}getTimerData(){const e=localStorage.getItem("today");return e?JSON.parse(e):void 0}updateTimerData(e,t){let i=this.getTimerData()||[];i[e]||(i[e]={}),i[e].remainTime=t,localStorage.setItem("today",JSON.stringify(i))}resetTimerIfDayChanged(){const e=this.getTimerData(),t=e?e.day:null,i=this.now.toDateString();t!==i&&(localStorage.setItem("today",JSON.stringify({day:i})),this.productArray.forEach((e=>{e.classList.remove("disabled"),e.removeAttribute("disabled")})))}init(){this.resetTimerIfDayChanged(),this.createTimer()}}class r{constructor(e,t,i){this.prevBtn=document.querySelector(e),this.nextBtn=document.querySelector(t),this.slides=Array.from(document.querySelectorAll(i)),this.currentItem=0,this.maxItems=this.slides.length,this.screenWidth=window.innerWidth,this.moveSlideLeft=this.moveSlideLeft.bind(this),this.moveSlideRight=this.moveSlideRight.bind(this)}callNextSlide(){this.slides.forEach((e=>{e.classList.remove("selected")})),this.slides[this.currentItem].scrollIntoView({behavior:"smooth",inline:"start",block:"nearest"}),this.slides[this.currentItem].classList.add("selected")}createEvents(){this.prevBtn.addEventListener("click",this.moveSlideLeft),this.nextBtn.addEventListener("click",this.moveSlideRight),this.slides[0].classList.add("selected")}moveSlideLeft(){this.currentItem--,this.currentItem<0&&(this.currentItem=this.maxItems-1),this.callNextSlide(),console.log("voltou")}moveSlideRight(){this.currentItem++,this.currentItem>=this.maxItems&&(this.currentItem=0),this.callNextSlide(),console.log("avançou")}init(){this.createEvents()}}class a{constructor(e,t){this.attrUL=Array.from(document.querySelectorAll(e)),this.variationSelect=Array.from(document.querySelectorAll(t))}createVariationsArray(){this.variationSelect.forEach((e=>{const t=e.id;let i=Array.from(e.children);i.shift(),this.attrUL.filter((e=>e.classList.contains(t))).forEach((t=>{let s=Array.from(t.children);this.setVariationsSelected(s,e,i)})),this.addChangeEvents(e)}))}setVariationsSelected(e,t,i){e.forEach(((s,n)=>{s.addEventListener("click",(()=>{e.forEach((e=>{e.classList.remove("active")})),s.classList.add("active"),this.isChangeEventInProgress||(this.isChangeEventInProgress=!0,i.forEach(((e,i)=>{e.removeAttribute("selected"),i===n&&(e.setAttribute("selected","selected"),t.value=e.value)})),this.updateForm(),this.isChangeEventInProgress=!1)}))}))}updateForm(){const e=new Event("change",{bubbles:!0});this.variationSelect.forEach((t=>{t.dispatchEvent(e)})),this.attrUL.forEach((t=>{t.dispatchEvent(e)}))}addChangeEvents(e){e.addEventListener("change",(()=>{this.isChangeEventInProgress||(this.isChangeEventInProgress=!0,this.updateForm(),this.isChangeEventInProgress=!1)}))}init(){this.createVariationsArray()}}class o{constructor(e,t){e&&t&&(this.imageUL=document.querySelector(e),this.imageID=document.querySelector(t),this.arrayImgUl=Array.from(this.imageUL.children),this.arrayImgSelect=Array.from(this.imageID.children),this.arrayImgSelect.shift())}SetImgSelected(){this.arrayImgUl.forEach(((e,t)=>{e.addEventListener("click",(()=>{this.arrayImgSelect.forEach((e=>{e.removeAttribute("selected")})),this.arrayImgSelect[t].setAttribute("selected","selected"),this.imageID&&(this.imageID.value=this.arrayImgSelect[t].value),this.updateForm()}))}))}updateForm(){const e=new Event("change",{bubbles:!0});this.imageID&&this.imageID.dispatchEvent(e),this.imageUL.dispatchEvent(e)}init(){this.SetImgSelected()}}class c{constructor(e){this.inputNumber=document.querySelector(e)}createSpanBtn(){this.decreaseBtn=document.createElement("div"),this.decreaseBtn.classList.add("decrease-btn"),this.increaseBtn=document.createElement("div"),this.increaseBtn.classList.add("increase-btn"),this.inputNumber.insertAdjacentElement("beforebegin",this.decreaseBtn),this.inputNumber.insertAdjacentElement("afterend",this.increaseBtn)}controlValues(){this.qtyValue=+this.inputNumber.value,this.decreaseBtn.addEventListener("click",(()=>{if(!this.isChangeEventInProgress){if(this.qtyValue--,this.qtyValue<=0)return 1;this.inputNumber.value=this.qtyValue.toString()}})),this.increaseBtn.addEventListener("click",(()=>{this.isChangeEventInProgress||(this.qtyValue++,this.inputNumber.value=this.qtyValue.toString())}))}init(){this.createSpanBtn(),this.controlValues()}}class l{constructor(e,t,i){this.galleryList=document.querySelectorAll(e),this.swatches=document.querySelectorAll(t),this.mainImg=document.querySelector(i),this.changeImage=this.changeImage.bind(this)}changeImage({currentTarget:e}){this.mainImg.src=e.src}addListChangeEvent(){this.galleryList.forEach((e=>{e.addEventListener("click",this.changeImage)})),this.galleryList.forEach((e=>{e.addEventListener("click",(()=>{this.galleryList.forEach((e=>{e.classList.remove("active")})),e.classList.add("active")}))}))}addSwatchesChangeEvent(){this.swatches.forEach((e=>{e.addEventListener("click",this.changeImage)})),this.swatches.forEach((e=>{e.addEventListener("click",(()=>{this.swatches.forEach((e=>{e.parentElement.classList.remove("active")})),e.parentElement.classList.add("active")}))}))}init(){this.addListChangeEvent(),this.addSwatchesChangeEvent()}}class d{constructor(e){this.element=document.querySelector(e),this.text=this.element.innerHTML,this.orderStatus={pending:"Pagamento pendente",processing:"Processando",waiting:"Aguardando",concluded:"Concluído",canceled:"Cancelado",refunded:"Reembolsado",unsucced:"Malsucedido"}}yellowBackground(){this.element.style.backgroundColor="#FFDA73"}redBackground(){this.element.style.backgroundColor="#f79f9f"}grayBackground(){this.element.style.backgroundColor="#ededed"}setBackgroundColor(){this.text===this.orderStatus.pending?this.yellowBackground():this.text===this.orderStatus.canceled||this.text===this.orderStatus.refunded||this.text===this.orderStatus.unsucced?this.redBackground():this.text===this.orderStatus.processing||this.text===this.orderStatus.waiting?this.grayBackground():this.element.style.backgroundColor="#a3de67"}init(){this.setBackgroundColor()}}if(document.querySelector(".header__cat-btn").addEventListener("click",(e=>{e.preventDefault()})),new t(".header__cat-btn",'[data-menu="list"]',"#menu-all-category > .menu-item",".sub-menu").init(),document.querySelector('[data-home="slide"]')){const e=new s(".slide",".slide-wrapper");e.init(),e.addControl()}if(document.querySelector('[data-home="crono"]')&&(new n(".crono-gallery .product__list .product__list-item").init(),new r(".crono-gallery .prev-btn",".crono-gallery .next-btn",'.crono-gallery .product__list [data-product="item"]').init()),document.querySelector(".newest-gallery")&&new r(".newest-gallery .prev-btn",".newest-gallery .next-btn",'.newest-gallery .product__list [data-product="item"]').init(),document.querySelector(".most-sales-gallery")&&new r(".most-sales-gallery .prev-btn",".most-sales-gallery .next-btn",'.most-sales-gallery .product__list [data-product="item"]').init(),document.querySelector("[data-filter='mobile-btn']")&&new t("[data-filter='mobile-btn']",'[data-filter="filter-nav"]',"#menu-filter-categories","#menu-filter-categories menu-item .sub-menu").init(),document.querySelector(".product__info")){const e="#pa_image";document.querySelector(e)&&new o('[data-cat="imgs"]',e).init(),new a('[data-cat="attributes"]',".variations select").init(),new c(".qty").init()}document.querySelector('[data-gallery="gallery"]')&&new l("[data-gallery='gallery-imgs']",'[data-cat="imgs-box"]','[data-gallery="gallery-main"]').init(),document.querySelector(".product__gallery-list")&&new r(".product__gallery-list .prev-btn",".product__gallery-list .next-btn",".product__gallery-slide .product__gallery-img").init(),document.querySelector(".products__related")&&new r('.products__related [data-product="control"]','.products__related .product__list [data-product="item"]').init(),document.querySelector(".order-status")&&new d(".order-status").init()})();